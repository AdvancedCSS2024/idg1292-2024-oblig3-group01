@use "./colors.scss";

@import url("https://fonts.googleapis.com/css2?family=Acme&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Acme&family=Amatic+SC:wght@400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap");

* {
    box-sizing: border-box;
    margin: 0;
}

html {
    font-family: "Acme";
}

.body {
    height: 100vh;
    overflow: hidden;
}

@mixin buildingCallAnimations($animationName) {
    animation: $animationName;
    padding: 0;
    background-color: #232C43;
}

.scene {
    overflow: hidden;
    position: relative;
    height: 100%;

    &__paragraph {
        background-color: white;
        font-size: clamp(14px, 1.5vw, 20px);
        position: absolute;
        left: 25%;
        width: 50%;
        top: 65%;
        padding: 5%;
        opacity: 0;
        text-align: center;
        z-index: 1;
        box-shadow: 0px 0px 2vw 1vw rgba(0, 0, 0, 0.381);

        &--oneactive {
            opacity: calc(0 + var(--paragraph-opacity, 1));
            top: calc(65% + var(--paragraph-pos, 65%));
        }

        &--twoactive {
            opacity: calc(0 + var(--paragraph-opacity, 1));
            top: calc(65% + var(--paragraph-pos, 65%));
        }

        &--threeactive {
            opacity: calc(0 + var(--paragraph-opacity, 1));
            top: calc(75% + var(--paragraph-pos, 75%));
        }

        &--fouractive {
            z-index: 3;
            opacity: calc(0 + var(--paragraph-opacity, 1));
            top: calc(75% + var(--paragraph-pos, 75%));
        }
    }

    &__one {
        position: absolute;
        width: 100%;
        height: 100%;

        &--dark {
            transition: 0.5s;
            background-color: #BCC1D0;
        }
    }

    &__headline {
        width: 100%;
        overflow: hidden;
        transform: translate(-50%, -50%);
        top: 40%;
        left: 50%;
        position: absolute;
        font-size: 8vw;
        height: 8vw;
        z-index: 1;
        opacity: calc(1 - var(--paragraph-opacity, 0));
        height: 11vw;

        &--one {
            position: absolute;
            display: block;
            left: -100%;
            width: auto;
            transform: translateX(-100%);
            animation: headLinePartOneAnimation 0.3s forwards;
        }

        &--two {
            display: block;
            left: 100%;
            width: auto;
            position: absolute;
            transform: translateX(0%);
            animation: headLinePartTwoAnimation 0.3s forwards;
        }
    }

    &__second {
        display: none;
        align-items: flex-end;
        flex-direction: row;
        flex-wrap: wrap;
        height: 100%;
        width: 100%;
        bottom: 0;
        left: 0;
        position: absolute;
        display: flex;
        animation: 10s redSkyAnimation forwards;

        &--disabled {
            transition: 0.8s ease-in-out;
            height: 0%;
            overflow: hidden;
        }
    }

    &__building {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-evenly;
        gap: 5%;
        align-items: flex-start;
        padding: 0;

        &--one {
            @include buildingCallAnimations(one-buildingAnimation 0.7s forwards 0.3s);
            width: 6%;
        }

        &--two {
            @include buildingCallAnimations(two-buildingAnimation 0.7s forwards 0.3s);
            width: 13%;
        }

        &--three {
            @include buildingCallAnimations(three-buildingAnimation 0.7s forwards 0.3s);
            width: 15%;
            gap: 8%;
        }

        &--four {
            @include buildingCallAnimations(four-buildingAnimation 0.7s forwards 0.3s);
            width: 13.5%;
        }

        &--five {
            @include buildingCallAnimations(five-buildingAnimation 0.7s forwards 0.3s);
            width: 13.5%;
        }

        &--six {
            @include buildingCallAnimations(six-buildingAnimation 0.7s forwards 0.3s);
            width: 10%;
        }

        &--seven {
            @include buildingCallAnimations(seven-buildingAnimation 0.7s forwards 0.3s);
            width: 7%;
        }

        &--eight {
            @include buildingCallAnimations(eight-buildingAnimation 0.7s forwards 0.3s);
            width: 10%;
        }

        &--nine {
            height: 80%;
            width: 12%;
            position: relative;
            background-color: transparent;
            padding: 3% 1.2% 0 1.2%;

            //used before because if modifying "--nine" itself, all buildings expands from center
            &::before {
                content: "";
                width: 100%;
                position: absolute;
                bottom: 0;
                height: 0%;
                left: 0;
                animation: nine-buildingAnimation 0.7s forwards 0.3s;
                background-color: #232C43;
            }
        }
    }

    &__window {
        background-color: #4C5F8F;
        opacity: 0;

        &--first {
            animation: first-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--second {
            animation: second-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--third {
            animation: third-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--four {
            animation: fourth-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--five {
            animation: fift-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--six {
            animation: sixth-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--seven {
            animation: seventh-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--eight {
            animation: eighth-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--nine {
            animation: ninth-window 0.6s forwards 0.7s, windowsOnAnimation 0.2s forwards 1.5s;
        }

        &--small {
            height: 11%;
            width: 10%;
            margin: 0 9%;
        }

        &--medium {
            height: 8%;
            width: 50%;
        }

        &--large {
            height: 10%;
            width: 75%;
        }

        &--tall {
            width: 10%;
            height: 35%;
        }
    }

    &__floor {
        width: 100%;
        @include buildingCallAnimations(foundation-buildingAnimation 0.2s forwards 0s);
        padding: 3% 0% 0 0%;
    }

    &__ocean {
        z-index: 2;
        position: absolute;
        height: 50%;
        bottom: 0%;
        overflow: hidden;
        width: 100%;
    }

    &__water {
        position: absolute;
        background-color: #4c5f8ebd;
        width: 100%;
        height: 0%;
        transition: 1s;
        bottom: 0%;
        left: 0%;


        &--active {
            animation: waterAnimation 2s forwards, waterwaving 3s ease-in-out infinite 5.3s;
        }
    }

    &__clouds {
        transform: translate(-50%, -50%);
        top: calc((20vh + 3vw) / 2);
        left: 50%;
        position: absolute;
        animation: cloudsAppear 5s forwards, cloudsGrow 30s forwards 13s;
    }

    &__cloud {
        position: absolute;
        border-radius: 50% / 50%;
        background-color: grey;
        opacity: 0.99;
        box-shadow: 0px 0px 1.5vw 2vw rgba(128, 128, 128, 1);

        &--active {
            animation: cloudsTurnGreen 3s forwards;
        }

        &--one {
            left: 3vw;
            width: 20%;
            top: calc(10% + 1.5vw);
            height: calc(80% - 3vw);
        }

        &--two {
            width: 15%;
            left: 15%;
            top: calc(10% + 1.5vw);
            height: calc(80% - 3vw);
        }

        &--three {
            width: 20%;
            left: 25%;
            top: 1.5vw;
            height: calc(90% - 3vw);
        }

        &--four {
            width: 10%;
            left: calc(73% - 3vw);
            top: calc(7% + 1.5vw);
            height: calc(90% - 3vw);
        }

        &--five {
            width: 30%;
            left: 40%;
            top: 1.5vw;
            height: calc(100% - 3vw);
        }

        &--six {
            width: 15%;
            left: 65%;
            top: calc(25% + 1.5vw);
            height: calc(50% - 3vw);
        }

        &--seven {
            width: 35%;
            left: calc(65% - 3vw);
            top: calc(7% + 1.5vw);
            height: calc(80% - 3vw);
        }
    }

    &__road {
        border-bottom: 2vw solid gray;
        border-right: 4vw solid transparent;
        width: 0%;
        display: block;
        height: 30%;
        box-shadow: 0 0.3vw 20px 3px rgba(0, 0, 0, 0);
        margin: 0 auto;
        animation: roadAnimation 0.7s forwards 1s;
        opacity: 0;
    }
}

.forest {
    &__svg {
        bottom: 0;
        position: absolute;
        width: 100vw;
    }

    &__deer {
        bottom: 14vw;
        left: 0%;
        width: 5%;
        fill: colors.$forest-greenV4;
        opacity: 0;
        animation: deerBodyMove 6s ease-in forwards 0.3s, deerOpacity 0.5s forwards 0.3s;
    }

    &__legs {
        &--one {
            transform-origin: center;
            animation: deerLegsOne 0.5s infinite;
        }

        &--two {
            transform-origin: center;
            animation: deerLegsTwo 0.5s infinite;
        }
    }

    &__trees {
        position: absolute;
        bottom: -50%;
        fill: colors.$forest-greenV4;
        animation: introTreesGrow 0.5s ease-in forwards;
    }

    //placed for animation
    &__tree {
        transform-origin: center;

        &--one {
            animation: fallTreeOne 7s linear 0.5s;
        }

        &--two {
            animation: fallTreeTwo 7s linear 2s;
            transform-origin: 50% 50%;
        }

        &--three {
            animation: fallTreeThree 7s linear;
        }
    }

    &__patch {
        &--one {
            fill: colors.$forest-greenV4;
        }

        &--two {
            fill: colors.$forest-greenV3;
        }

        &--three {
            fill: colors.$forest-greenV2;
        }

        &--four {
            fill: colors.$forest-greenV1;
        }

        &--grey {
            transition: 0.2s;
            opacity: 0.4;
        }

        &--left {
            transform: translateX(calc(-50% - var(--patch-pos, 0px)));
            position: absolute;
        }

        &--right {
            transform: translateX(calc(50% + var(--patch-pos, 0px)));
            position: absolute;
        }
    }
}

.bulldozer {
    &__svg {
        width: 60vw;
        aspect-ratio: 1255 / 672;
        position: absolute;
        z-index: 2;
        bottom: 0;
        left: -60vw;


        &--active {
            animation: bulldozerDrive 4s linear forwards;
        }
    }
}

@keyframes windowsOnAnimation {
    100% {
        background-color: rgb(255, 255, 197);
        box-shadow: 0px 0px 20px 4px rgb(255, 255, 170, 0.4);
    }
}

@keyframes bulldozerDrive {
    100% {
        left: 101%;
    }
}

@keyframes introTreesGrow {
    0% {
        bottom: -50%;
    }

    100% {
        bottom: 0%;
    }
}

@keyframes headLinePartTwoAnimation {
    100% {
        left: 50%;
    }
}

@keyframes headLinePartOneAnimation {
    100% {
        left: 49%;
    }
}

@keyframes deerOpacity {
    0% {
        width: 5%;
        opacity: 0;
    }

    100% {
        width: 10%;
        opacity: 1;
    }
}

@keyframes deerBodyMove {
    0% {
        left: 0%;
    }

    20% {
        bottom: 13vw;
    }

    30% {
        bottom: 10vw;
    }


    50%,
    53% {
        bottom: 5vw;
    }

    65% {
        bottom: 10vw;
    }

    80%,
    100% {
        bottom: 14vw;
        left: 90%;
    }
}

@keyframes deerLegsOne {

    0% {
        transform: skew(-10deg);
    }

    50% {
        transform: skew(10deg);
    }

    100% {
        transform: skew(-10deg);
    }
}

@keyframes deerLegsTwo {

    0% {
        transform: skew(10deg);
    }

    50% {
        transform: skew(-10deg);
    }

    100% {
        transform: skew(10deg);
    }
}

@keyframes redSkyAnimation {
    10% {
        box-shadow: 0px 0px 0px 0px inset #d84c06;
    }

    50%,
    100% {
        box-shadow: -5vw -90vh 10vh 0 inset #973605b4;
    }
}

@keyframes waterAnimation {
    0% {
        rotate: -5deg;
        height: 0%;
    }

    20% {
        rotate: 5deg;
    }

    40% {
        rotate: -5deg;
    }

    60% {
        rotate: 5deg;
    }

    80% {
        rotate: -5deg;
    }

    100% {
        rotate: 0deg;
        height: 100%;
    }
}

@keyframes cloudsTurnGreen {
    100% {
        opacity: 1;
        background-color: rgb(70, 84, 70);
        box-shadow: 0px 0px 1.5vw 2vw rgb(70, 84, 70);
    }
}

@keyframes cloudsAppear {

    0% {
        opacity: 0;
        height: 0%;
        width: 0%;
    }

    5% {
        opacity: 0.8;
        height: 0%;
        width: 0%;
    }

    60%,
    100% {
        opacity: 0.99;
        width: 100%;
        height: calc(20vh + 3vw);
    }
}

@keyframes roadAnimation {
    0% {
        opacity: 1;
    }

    50% {
        box-shadow: 0 0vw 0px 0px rgba(0, 0, 0, 0.523), 0 0vw 0vw 0vw rgba(0, 0, 0, 0.3);
        width: 100%;
        border-right: 0vw solid transparent;
    }

    100% {
        opacity: 1;
        width: 100%;
        border-right: 0vw solid transparent;
        box-shadow: 0 0.3vw 1px 3px rgba(0, 0, 0, 0.523), 0 -5vw 10vw 5vw rgba(0, 0, 0, 0.3);
    }
}

@keyframes fallTreeOne {
    4% {
        transform: translate(-2%, 30%) rotate(30deg);
    }

    8% {
        transform: translate(-4%, 60%) rotate(60deg);
    }

    12% {
        transform: translate(-6%, 90%) rotate(90deg);
    }

    16%,
    100% {
        transform: translate(-8%, 120%) rotate(120deg);
    }
}

@keyframes fallTreeTwo {
    6% {
        transform: translate(0%, 30%);
    }

    8% {
        transform: translate(0%, 60%);
    }

    12% {
        transform: translate(0%, 90%);
    }

    16%,
    100% {
        transform: translate(0%, 120%);
    }
}

@keyframes fallTreeThree {
    34% {
        transform: rotate(0deg);
    }

    38% {
        transform: translate(-2%, 30%) rotate(30deg);
    }

    42% {
        transform: translate(-4%, 60%) rotate(60deg);
    }

    46% {
        transform: translate(-6%, 90%) rotate(90deg);
    }

    50%,
    100% {
        transform: translate(-8%, 120%) rotate(120deg);
    }
}

@keyframes cloudsAppear {
    0% {
        opacity: 0;
        height: 0%;
        width: 0%;
    }

    5% {
        opacity: 0.8;
        height: 0%;
        width: 0%;
    }

    60%,
    100% {
        opacity: 0.99;
        width: 100%;
        height: calc(20vh + 3vw);
    }
}

@keyframes roadAnimation {
    0% {
        opacity: 1;
    }

    50% {
        box-shadow: 0 0vw 0px 0px rgba(0, 0, 0, 0.523),
            0 0vw 0vw 0vw rgba(0, 0, 0, 0.3);
        width: 100%;
        border-right: 0vw solid transparent;
    }

    100% {
        opacity: 1;
        width: 100%;
        border-right: 0vw solid transparent;
        box-shadow: 0 0.3vw 1px 3px rgba(0, 0, 0, 0.523),
            0 -5vw 10vw 5vw rgba(0, 0, 0, 0.3);
    }
}

@keyframes one-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 0%;
    }

    10%,
    17% {
        height: 4%;
    }

    18%,
    29% {
        height: 14%;
    }

    30%,
    35% {
        height: 20%;
    }

    36%,
    40% {
        height: 30%;
    }

    50%,
    59% {
        height: 32.5%;
    }

    60%,
    65% {
        height: 40%;
    }

    66%,
    73% {
        height: 45%;
    }

    74%,
    85% {
        height: 53%;
    }

    86%,
    90% {
        height: 60%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 65%;
    }
}

@keyframes two-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 0%;
    }

    10%,
    17% {
        height: 0%;
    }

    18%,
    29% {
        height: 0%;
    }

    30%,
    35% {
        height: 10%;
    }

    36%,
    40% {
        height: 20%;
    }

    50%,
    59% {
        height: 30%;
    }

    60%,
    65% {
        height: 40%;
    }

    66%,
    73% {
        height: 56%;
    }

    74%,
    85% {
        height: 65%;
    }

    86%,
    90% {
        height: 73%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 80%;
    }
}

@keyframes three-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 5%;
    }

    10%,
    17% {
        height: 5%;
    }

    18%,
    29% {
        height: 15%;
    }

    30%,
    35% {
        height: 16%;
    }

    36%,
    40% {
        height: 25%;
    }

    50%,
    59% {
        height: 30%;
    }

    60%,
    65% {
        height: 36%;
    }

    66%,
    73% {
        height: 39%;
    }

    74%,
    85% {
        height: 43%;
    }

    86%,
    90% {
        height: 48%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 50%;
        box-shadow: -10px 20px 20px 0px rgba(0, 0, 0, 0.3) inset;
    }
}

@keyframes four-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 4%;
    }

    10%,
    17% {
        height: 8%;
    }

    18%,
    29% {
        height: 14%;
    }

    30%,
    35% {
        height: 22%;
    }

    36%,
    40% {
        height: 25%;
    }

    50%,
    59% {
        height: 31.5%;
    }

    60%,
    65% {
        height: 38%;
    }

    66%,
    73% {
        height: 39%;
    }

    74%,
    85% {
        height: 44%;
    }

    86%,
    90% {
        height: 53%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 63%;
    }
}

@keyframes five-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 1%;
    }

    10%,
    17% {
        height: 4%;
    }

    18%,
    29% {
        height: 8%;
    }

    30%,
    35% {
        height: 12%;
    }

    36%,
    40% {
        height: 14%;
    }

    50%,
    59% {
        height: 16%;
    }

    60%,
    65% {
        height: 18%;
        box-shadow: -0px 0px 20px 0px rgba(0, 0, 0, 0) inset;
    }

    66%,
    73% {
        height: 19%;
    }

    74%,
    85% {
        height: 19%;
    }

    86%,
    90% {
        height: 22%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 25%;
        box-shadow: -20px 0px 20px 0px rgba(0, 0, 0, 0.4) inset;
    }
}

@keyframes six-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 6%;
    }

    10%,
    17% {
        height: 10%;
    }

    18%,
    29% {
        height: 13%;
    }

    30%,
    35% {
        height: 16%;
    }

    36%,
    40% {
        height: 17%;
    }

    50%,
    59% {
        height: 25%;
    }

    60%,
    65% {
        height: 29%;
    }

    66%,
    73% {
        height: 32%;
    }

    74%,
    85% {
        height: 40%;
    }

    86%,
    90% {
        height: 45%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 50%;
    }
}

@keyframes seven-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 14%;
    }

    10%,
    17% {
        height: 16%;
    }

    18%,
    29% {
        height: 20%;
    }

    30%,
    35% {
        height: 25%;
    }

    36%,
    40% {
        height: 28%;
    }

    50%,
    59% {
        height: 34.5%;
    }

    60%,
    65% {
        height: 40%;
    }

    66%,
    73% {
        height: 48%;
    }

    74%,
    85% {
        height: 53%;
    }

    86%,
    90% {
        height: 60%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 69%;
    }
}

@keyframes eight-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 4%;
    }

    10%,
    17% {
        height: 8%;
    }

    18%,
    29% {
        height: 14%;
    }

    30%,
    35% {
        height: 22%;
    }

    36%,
    40% {
        height: 25%;
    }

    50%,
    59% {
        height: 31.5%;
    }

    60%,
    65% {
        height: 38%;
    }

    66%,
    73% {
        height: 39%;
    }

    74%,
    85% {
        height: 44%;
    }

    86%,
    90% {
        height: 53%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 63%;
    }
}

@keyframes nine-buildingAnimation {

    0%,
    9% {
        padding: 3% 1.2% 0 1.2%;
        height: 0%;
    }

    10%,
    17% {
        height: 10%;
    }

    18%,
    29% {
        height: 18%;
    }

    30%,
    35% {
        height: 25%;
    }

    36%,
    40% {
        height: 35%;
    }

    50%,
    59% {
        height: 45%;
    }

    60%,
    65% {
        height: 50%;
    }

    66%,
    73% {
        height: 76%;
    }

    74%,
    85% {
        height: 85%;
    }

    86%,
    90% {
        height: 93%;
    }

    91%,
    100% {
        padding: 3% 1.2% 0 1.2%;
        height: 100%;
    }
}

@keyframes foundation-buildingAnimation {
    24% {
        height: 0%;
    }

    25% {
        height: 5%;
    }

    49% {
        height: 5%;
    }

    50% {
        height: 10%;
    }

    74% {
        height: 10%;
    }

    75% {
        height: 15%;
    }

    99% {
        height: 15%;
    }

    100% {
        height: 20%;
    }
}

@keyframes first-window {
    9% {
        opacity: 0;
    }

    10% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes second-window {
    19% {
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes fourth-window {
    29% {
        opacity: 0;
    }

    30% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes third-window {
    39% {
        opacity: 0;
    }

    40% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes fift-window {
    49% {
        opacity: 0;
    }

    50% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes sixth-window {
    59% {
        opacity: 0;
    }

    60% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes ninth-window {
    69% {
        opacity: 0;
    }

    70% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes seventh-window {
    79% {
        opacity: 0;
    }

    80% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}

@keyframes eighth-window {
    89% {
        opacity: 0;
    }

    90% {
        opacity: 1;
    }

    100% {
        opacity: 1;
    }
}